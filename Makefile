.PHONY: all clean fclean re fcleanlib testleaks test

#-L./Libft	: indique ou se trv la lib qu'il faut ajouter, le path
#-lft		: indique le nom de la lib, mais sans le préfixe lib-, le name
#-I	: indique ou se trv le .h de la lib, le path
#alternative à -I : noter dans le header local
#-C : permets de changer de dir avant d'exec la cmd

NAME = push_swap
CC = gcc
CCFLAGS = -Wall -Wextra -Werror
LEAKS = leaks -atExit --
LDFLAGS = -L$(LIBFT_PATH) -lft

RM = rm -rf
MKDIR = mkdir -p

LIBFT_PATH = ./lib/
SRC_DIR = src
OBJ_DIR = bin
BIN_DIR = bin

SRCS = $(wildcard ${SRC_DIR}/*.c)
OBJS = $(SRCS:${SRC_DIR}/%.c=${OBJ_DIR}/%.o)

#20 items entre -10000 et 10000
#NUMBERS = 419 3170 -1160 2194 -9171 7004 948 3891 3055 -9553 1219 6914 9136 -6324 -5584 -995 1567 7483 -6852 -5815
#20 items entre -10000 et 10000, dans l'ordre
# NUMBERS = -9601 -7856 -7172 -6735 -6382 -6128 -5734 -5135 -4193 -3117 -1534 -987 -597 4068 5512 5576 6608 7786 9253 9717
#10 items entre -10 et 10
#NUMBERS = -6 5 -7 1 0 7 -4 3 -2 6
#10 items entre -10 et 10, dans l'ordre
#NUMBERS = -10 -6 -5 -3 1 3 4 5 8 9
#1000 items entre -10000 et 10000
#NUMBERS = 3260 656 -5390 6424 -5307 4730 9884 -380 7410 7615 8169 158 2592 5310 -3326 -2346 7012 -9833 8067 9455 -6699 3192 1094 -2987 6940 -4406 6113 -3531 3021 -315 -8689 -9279 5197 6405 -507 2500 -1572 -4260 5711 -8449 -5576 7374 7574 -3057 -1033 3623 -4001 -8268 2150 -2578 9529 -4646 6110 -215 -5211 -7208 4526 5272 -4731 5352 3717 9621 6409 9094 4566 8220 2662 -1694 615 2733 -8605 -2516 9996 -7483 968 357 -4068 -3712 -3467 -6233 -6676 5988 -6720 7009 5550 7549 4727 -7304 -8579 -9102 9781 1162 3040 -1397 6337 -7591 -7020 7274 -8904 9467 8192 -8314 -2895 -8514 -6187 -2953 -7429 -3422 -2623 -7315 -6670 -5165 605 2086 2850 2319 -7736 -4276 -5617 1363 1748 7468 -4246 -7478 -3363 8343 4015 -8049 4372 -4401 -7491 8138 7551 -4709 -932 5362 -1187 5458 -2958 1170 -5831 -1596 2580 8585 -3096 8515 729 1175 -7085 3829 5202 1509 4902 -6367 4928 7566 -2870 -4618 9016 -5317 5389 -7941 -6646 5617 -8340 7242 -1158 -2475 -1073 3457 3934 -1384 2887 3458 -3745 -2973 -5373 4160 -2085 2785 -2723 3340 -318 -8669 -8731 5158 -9609 9875 5314 7804 -4118 6386 -5044 5596 -4294 1154 1760 -6243 -5049 -2754 -1558 -2422 139 -1518 5802 1891 2316 -3972 -4622 1869 -7229 9170 7177 -8025 -6772 9174 2136 -892 -1032 -1633 -7576 -7398 3755 1619 -5763 -1110 -9220 -4026 -5597 -8825 4671 -3127 -3047 9764 -8286 3518 4743 -6669 -7282 -9155 8879 22 5872 6023 2001 6956 6283 -5962 1876 2971 6263 2772 8654 -387 -3192 0 7830 -7150 -1347 4542 -8905 -7018 3901 5943 5858 -5354 -7700 2448 8035 5495 3233 5780 -3825 -3083 1498 -2480 -4074 6229 -2877 2784 5522 -6657 1537 2445 4555 -9184 -6611 -4087 -7766 544 -4216 -6598 -4752 2114 7616 7506 7081 4053 1121 4773 6826 4148 1977 -3400 7774 -5051 -5398 -4954 -846 2475 -5947 8506 8853 -473 5178 -3508 -965 -1666 -737 -4561 7597 4279 2279 -3388 2915 -7726 -8866 8188 -3569 4736 4382 -89 -573 7732 7632 2172 -9890 -3455 -9503 -8729 2425 1106 7614 -7565 -3861 1807 -3264 -4723 -1628 9378 -6608 -2460 -7269 3943 -7669 1048 8695 8766 7785 8712 6436 2839 5107 8368 -4661 2371 6066 6533 -562 4427 3893 -60 3591 9471 -9094 -2801 -8571 2405 -7862 1863 -1556 7198 5861 8444 8938 3736 5855 9172 3705 -2191 -1102 -3151 -7789 -2379 -7763 -9156 2996 8759 3744 8353 -9680 7066 -6402 5259 -2726 1947 4057 -3996 8115 9127 -1265 8944 3424 -7914 9789 9212 -9528 6520 -5304 1459 -7198 5680 5590 -4596 4717 -3081 1097 -7303 3740 4670 6892 -6245 7775 4795 3361 -6719 -2108 8410 2328 -4017 -4310 1865 9540 5269 -5507 8447 4999 -912 -864 7530 -331 5851 -7817 -658 -8924 -6292 9111 -1982 5450 -941 3471 -9575 -3852 -4228 7306 -3523 1528 -400 1653 8292 4238 3945 6819 872 -5521 5271 2779 1114 9752 -3622 3995 -6389 -1137 5022 -6497 175 -2986 2780 -3019 5764 -8116 8916 -85 2137 6511 -314 -6257 -5359 -5678 8749 1065 -8840 -2735 -9615 -2175 -3513 1722 -6368 9062 -8365 -7412 5105 6426 3657 -4116 140 4539 9690 7093 2404 394 -4428 -2871 -8090 -7079 2870 -9454 2295 2120 488 -7033 3423 2411 6677 1657 5791 -3919 6508 -1292 -301 -957 254 -7847 -5949 5106 9161 2758 -7355 -8072 1604 4077 881 -1565 -3855 7903 3563 -6004 2539 -3374 -3336 6268 6704 6119 2180 -7883 388 9263 -964 -4029 4664 2465 -5106 3000 -9015 -7192 5509 2622 -381 -3728 -9281 -3746 -2293 -5632 -4209 2275 -1506 -5043 -8871 1980 -4356 1895 -3303 1359 -4725 -8630 -7853 5326 252 -8519 2080 -1182 -2254 -523 -7421 -5424 -8554 -5906 -6617 8503 5941 -9867 9047 3859 184 3120 -4240 7573 1954 7786 891 6227 4744 -8701 -9271 -1949 -8448 -3634 -8794 9933 8170 1467 -7915 8015 2192 5333 -9537 4663 -790 7169 4051 774 8303 3291 363 -9095 -4699 -7364 1007 3797 1882 4236 34 -2967 -436 8 -4003 -6307 -6332 -4317 4779 3643 -3451 -8362 3473 4619 -9631 -3309 -3085 9773 5831 -5162 8636 5030 9843 -2082 5606 2271 -8946 -2812 -2018 -209 -702 -246 5880 -3863 -5294 -6051 -5464 -3505 2035 -8303 5023 -745 1946 7101 -706 7200 3505 4712 1351 -8894 1350 -1759 954 -9921 -5067 5939 -5783 -3286 5455 -7352 -7141 5812 3785 9105 7888 8455 2087 -1197 -642 -6528 -200 -3810 -6907 6447 -1318 3549 4569 -819 3796 8117 4092 -1728 2868 -4516 5095 6433 4994 7696 3395 -8578 -8951 -2571 9058 -2559 1185 -2717 -9725 -3932 4932 -6103 7211 -9475 -1984 7294 -4896 6414 -3735 -8808 8465 -5184 -4518 -6521 7231 279 -260 -3067 -2668 -3314 5385 -883 -9781 4667 8091 -5098 880 8604 -948 8236 4062 5129 3673 -7075 8735 2248 -5278 2343 -8907 7280 -3542 4114 6155 4041 -8339 -3424 -6500 2335 5249 -5386 -9289 1518 8865 -4587 6587 4724 3025 6497 -2104 -7055 -2338 -5336 -2420 6709 6038 1201 -1000 -5483 5283 54 9472 8981 -138 -9270 9994 -7728 3854 -5270 830 866 -3414 8832 6442 6169 -7614 -2278 -5169 3338 -2817 -5650 -3038 8914 -2032 -83 6935 -5207 -5510 6578 4859 -1321 -7843 -785 3618 2176 -7783 5820 2724 -1786 9962 1685 6279 1074 -163 3641 1567 9169 3023 8806 2524 4297 7443 -431 -8260 3961 -6628 -6319 -3973 1033 -1029 -595 -3662 -8801 7321 4951 5112 6580 7970 -6820 -1026 -1007 -3579 -7733 -3131 -3838 7312 -9021 4180 -822 -3086 -2714 9609 -8646 -1053 -735 773 -7414 6288 1603 -6709 2118 -3036 9922 -8125 7381 3414 1336 -1980 -1510 185 2195 -639 -2831 -5197 -2467 3259 2368 -7680 8717 -6346 5371 -8843 -6305 7624 -7769 -8172 9282 -1245 6721 -9138 -4078 -3585 2013 -5493 3046 -4879 5317 3523 -3266 7144 8226 460 3650 -9628 1441 -7228 -376 -4748 -9663 2098 8340 6084 3895 -3219 -2501 532 -5252 -7548 -8307 -1457 4294 374 2003 -227 -5672 1284 -4979 6688 2237 -1129 7016 6355 -2649 -5994 -9552 -5535 8796 -93 -7143 9448 8774 3543 3279 -4241 -1808 5021 5070 2305 6854 -9386 -5478 -9777
#Segfault
NUMBERS = -56894 31344 52441 -57277 -18146 20463 -9729 45870 -60531 59111 20630 -48895 31762 -59434 -15622 62825 -41797 21572 19650 -15891 -9150 -19021 37510 -5526 -14719 17938 -3434 11002 -44632 30748 -13890 -36062 -16355 -41814 -18401 45116 18416 32317 -19821 21255 12922 -10114 -38749 -47095 38614 -38963 21988 -15311 52557 13617 -27186 40771 53805 33623 -36214 41719 -15488 41614 44439 64192 -24897 -27448 -5928 39311 56389 -59825 1911 -39731 -8716 -28145 -17945 1000 -29742 42039 -38220 -4194 64078 51728 -25418 -43811 -12506 -61935 -64464 22462 3705 -43917 44795 -50721 37500 -48967 62553 61839 13678 -54694 23082 -58509 30562 -23016 -40848 4302
#five num
#NUMBERS = -2 2 -4 4 1

# Colors
DEF_COLOR = \033[0;39m
GRAY = \033[0;90m
RED = \033[0;91m
GREEN = \033[0;92m
YELLOW = \033[0;93m
BLUE = \033[0;94m
MAGENTA = \033[0;95m
CYAN = \033[0;96m
WHITE = \033[0;97m

all: $(NAME)
	

$(NAME): $(OBJS)
	@make -C lib
	@echo "Creating ./$@"
	@$(CC) ${CCFLAGS} $(OBJS) $(INCLUDES) $(LDFLAGS) -o $(NAME)
	@echo "$(GREEN) The Makefile of ${NAME} has been compiled!$(DEF_COLOR)"
	@echo "$(YELLOW)\n !Use this command in the folder root: ./${NAME} 53 24 87 1 5 98 ... 42\n$(DEF_COLOR)" 

${OBJ_DIR}/%.o: ${SRC_DIR}/%.c
	@${MKDIR} ${BIN_DIR}
	@${CC} ${CCFLAGS} $(INCLUDES) -c $< -o $@

test:
# @echo "Testing ${NAME}"
	@./${NAME} ${NUMBERS} | ./checker_Mac ${NUMBERS}

testleaks:
	@echo "Testing Leaks in ${NAME}"
	@sleep 1
	@${LEAKS} ./${NAME} ${NUMBERS}

clean:
	@echo "Cleaning up ${NAME}"
	@${RM} ${OBJ_DIR}
	@echo "$(BLUE) ${NAME} Object files cleaned!$(DEF_COLOR)"

fcleanlib:
	@make fclean -C lib
	@echo "Cleaning up the lib"

fclean: clean
	@${RM} ${NAME}
	@echo "$(BLUE) ${NAME} Executable files cleaned!$(DEF_COLOR)"

re: fclean all
	@echo "$(BLUE) ${NAME} Cleaned and rebuilt everything!$(DEF_COLOR)"